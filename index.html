<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'">
  	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport"   content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>SMonBarcode</title>

	<script type="text/javascript" charset="utf-8" src="cordova.js"></script>


<script>


var MyLat;
var MyLong;
var MyAlt;
var MyHead;
var MySpeed;
var MyAcc;

function onDeviceReady() 
	{
    document.removeEventListener('deviceready', onDeviceReady, false);

	console.log("device ready, getting position");
	navigator.geolocation.getCurrentPosition(onSuccess, onError, {enableHighAccuracy: true,  maximumAge:0});
	var opts = { timeout: 5000, enableHighAccuracy: true, maximumAge:0};
	watchID = navigator.geolocation.watchPosition(onSuccess, onError, opts);
	
	scan_bar_code();

    }


function onSuccess(position) 
	{
	console.log("on GPS success");

	MyLat=position.coords.latitude ;
	MyLong=position.coords.longitude ;
	MyAlt=position.coords.altitude ;
	MyHead=position.coords.heading ;
	MySpeed=position.coords.speed ;
	MyAcc=position.coords.accuracy;

	console.log(MyLat+ " - "+MyLong);



    }

document.addEventListener("deviceready", onDeviceReady, false);

function onError()
	{
//		onDeviceReady() ;
//	alert("error");
	}

function scan_bar_code()
{
	//alert("scaninng");

	cordova.plugins.barcodeScanner.scan(
      function (result) {
          alert("cavikitxe: " + result.text + "\n" +   "formati: " + result.format + "\n");
      },
      function (error) {
          alert("Scanning failed: " + error);
      },
      {
          preferFrontCamera : false, // iOS and Android
          showFlipCameraButton : false, // iOS and Android
          showTorchButton : true, // iOS and Android
          torchOn: false, // Android, launch with the torch switched on (if available)
          saveHistory: false, // Android, save scan history (default false)
          prompt : "მიუშვირეთ ბარკოდს", // Android
          resultDisplayDuration: 500, // Android, display scanned text for X ms. 0 suppresses it entirely, default 1500
          disableAnimations : true, // iOS
          disableSuccessBeep: true // iOS and Android
      }
   );
}

//  formats : "QR_CODE,PDF_417", // default: all but PDF_417 and RSS_EXPANDED
//          orientation : "landscape", // Android only (portrait|landscape), default unset so it rotates with the device



</script>

  </head>
  <style>
	body {color:black; margin:0px; padding:0px;}
	a {text-decoration:none; color:blue;}
  </style>
  <body style='padding:0; border:0; margin:0; color:black; background-color:white; '>

<p>chavitvirte<br>
<center><a href="Javascript: scan_bar_code();">ბარკოდის სკანირება</a></center></p>

</body>



</html>
